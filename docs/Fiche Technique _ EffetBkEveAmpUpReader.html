<p /><p><strong>Introduction</strong></p><p><strong>Description</strong> : La tache EffetBkEveAmpUpReader est con&ccedil;ue pour lire et traiter les fichiers contenant des informations sur les &eacute;v&eacute;nements d'effets bancaires, en mettant &agrave; jour les enregistrements dans la base de donn&eacute;es et en envoyant des notifications par email si n&eacute;cessaire.</p><p><strong>Package</strong></p><p><strong>Emplacement</strong> : sas.action.readers.corporates</p><p><strong>Description Fonctionnelle</strong></p><p><strong>D&eacute;clenchement</strong> : Activ&eacute;e lors de la d&eacute;tection de nouveaux fichiers d'&eacute;v&eacute;nements d'effets dans le r&eacute;pertoire configur&eacute;.</p><p><strong>Traitement</strong> :</p><p>Lit chaque ligne du fichier pour extraire les informations des &eacute;v&eacute;nements d'effets.</p><p>Cr&eacute;e des objets BkeveEffet &agrave; partir des lignes lues.</p><p>Met &agrave; jour les enregistrements d'effets dans la base de donn&eacute;es si les conditions sont remplies.</p><p>Envoie des notifications par email aux &eacute;tablissements concern&eacute;s si des mises &agrave; jour ont &eacute;t&eacute; effectu&eacute;es.</p><p><strong>R&eacute;sultat</strong> : Les enregistrements d'effets sont mis &agrave; jour dans la base de donn&eacute;es, et des emails de notification sont envoy&eacute;s aux &eacute;tablissements concern&eacute;s.</p><p><strong>En cas d&rsquo;erreur</strong> : Les erreurs de traitement sont consign&eacute;es dans les journaux pour un suivi ult&eacute;rieur.</p><p><strong>Op&eacute;rations Cl&eacute;s</strong></p><p><strong>Lecture des Fichiers</strong> : Utilise un BufferedReader pour lire chaque ligne du fichier et extraire les informations n&eacute;cessaires.</p><p><strong>Cr&eacute;ation d'Objets</strong> :</p><p>Utilise la m&eacute;thode createBkeveEffet pour transformer chaque ligne du fichier en un objet BkeveEffet.</p><p>Utilise des expressions r&eacute;guli&egrave;res pour diviser les lignes en attributs.</p><p><strong>Mise &agrave; Jour des Effets</strong> :</p><p>Recherche les enregistrements d'effets existants dans la base de donn&eacute;es &agrave; l'aide de DataBaseJPA.</p><p>Met &agrave; jour les attributs des effets si les conditions sont remplies.</p><p>Met &agrave; jour l'&eacute;tat des effets si n&eacute;cessaire.</p><p><strong>Envoi de Notifications</strong> :</p><p>Envoie des emails de notification aux &eacute;tablissements concern&eacute;s si des mises &agrave; jour ont &eacute;t&eacute; effectu&eacute;es.</p><p>Utilise JerseyEmailClient pour envoyer les emails avec des mod&egrave;les HTML.</p><p><strong>Param&egrave;tres du Composant</strong></p><p><strong>S&eacute;parateur de Ligne</strong> : Utilise le caract&egrave;re | pour diviser les lignes en attributs.</p><p><strong>Interactions avec la Base de Donn&eacute;es</strong></p><p><strong>Requ&ecirc;tes SQL</strong> : Utilise des requ&ecirc;tes JPQL pour r&eacute;cup&eacute;rer et mettre &agrave; jour les enregistrements d'effets et d'&eacute;tablissements.</p><p><strong>Gestion des Transactions</strong> : Utilise DataBaseJPA pour g&eacute;rer les transactions de base de donn&eacute;es.</p><p><strong>Param&egrave;tres Utilis&eacute;s et Valeurs Possibles</strong></p><p><strong>`CODE_BANQUE_SICA3`</strong> :</p><p><strong>Utilisation</strong> : Utilis&eacute; pour d&eacute;finir la banque remettante lors de la mise &agrave; jour des effets.</p><p><strong>Valeur Possible</strong> : Code sp&eacute;cifique &agrave; la banque utilis&eacute; pour identifier la banque remettante.</p><p><strong>`CETAOPEVAL2`</strong> et <strong>`CETAOPEVALDELTA`</strong> :</p><p><strong>Utilisation</strong> : Utilis&eacute;s pour v&eacute;rifier et mettre &agrave; jour l'&eacute;tat des effets. Ils sont r&eacute;cup&eacute;r&eacute;s via Utility.getParam() pour d&eacute;terminer les valeurs d'&eacute;tat &agrave; utiliser lors de la mise &agrave; jour des enregistrements d'effets.</p><p><strong>Valeurs Possibles</strong> : Identifiants num&eacute;riques ou codes sp&eacute;cifiques d&eacute;finis dans le syst&egrave;me pour repr&eacute;senter diff&eacute;rents &eacute;tats des effets. Les valeurs exactes d&eacute;pendent de la configuration du syst&egrave;me et des besoins m&eacute;tier.</p><p><strong>`EMAIL_TEMPLATES_FOLDER`</strong> :</p><p><strong>Utilisation</strong> : Utilis&eacute; pour localiser le dossier contenant les mod&egrave;les d'email HTML.</p><p><strong>Valeur Possible</strong> : Chemin d'acc&egrave;s au dossier contenant les mod&egrave;les d'email HTML.</p><p>Cette fiche technique inclut les fonctionnalit&eacute;s principales de la classe EffetBkEveAmpUpReader, en mettant l'accent sur le processus de lecture, de cr&eacute;ation d'objets, de mise &agrave; jour des enregistrements dans la base de donn&eacute;es, l'envoi de notifications par email, et l'utilisation des param&egrave;tres de configuration.</p>