<p /><p><strong>Introduction</strong></p><p><strong>Description</strong> : La tache MailiNatBankSFDWriter est une extension de BinFileWriter utilis&eacute;e pour g&eacute;n&eacute;rer des fichiers binaires contenant les images de ch&egrave;ques et d'effets nationaux &agrave; envoyer vers une banque. Elle r&eacute;cup&egrave;re les donn&eacute;es des ch&egrave;ques et effets &agrave; partir de la base de donn&eacute;es, les traite, et g&eacute;n&egrave;re des fichiers binaires pour chaque banque nationale.</p><p><strong>Package</strong></p><p><strong>Emplacement</strong> : sas.action.writers.corporates.sfd.sica</p><p><strong>Description Fonctionnelle</strong></p><p><strong>Objectif</strong> : G&eacute;n&eacute;rer des fichiers binaires contenant les images de ch&egrave;ques et d'effets nationaux pour les envoyer vers une banque.</p><p><strong>Traitement</strong> :</p><p>R&eacute;cup&egrave;re les ch&egrave;ques et effets &agrave; partir de la base de donn&eacute;es pour chaque banque nationale.</p><p>Formate les donn&eacute;es et les images selon les sp&eacute;cifications requises.</p><p>G&eacute;n&egrave;re des fichiers binaires pour chaque banque et les enregistre dans un r&eacute;pertoire sp&eacute;cifi&eacute;.</p><p><strong>Attributs</strong></p><p><strong>sql, sequence</strong> : String - Utilis&eacute;s pour stocker les requ&ecirc;tes SQL et les s&eacute;quences de fichiers.</p><p><strong>enteteRemise</strong> : EnteteRemise - Contient les informations d'en-t&ecirc;te pour la remise.</p><p><strong>rImageBytes, vImageBytes, imageBytes</strong> : byte[] - Contiennent les donn&eacute;es d'image pour les ch&egrave;ques et effets.</p><p><strong>imageIndex</strong> : ImageIndex - Contient les informations d'index pour les images.</p><p><strong>cheques, cheques35</strong> : List&lt;Cheques&gt; - Listes des ch&egrave;ques &agrave; traiter.</p><p><strong>effets45, effets46</strong> : List&lt;Effets&gt; - Listes des effets &agrave; traiter.</p><p><strong>remiseHasCheques, remiseHasEffets</strong> : boolean - Indiquent si la remise contient des ch&egrave;ques ou des effets.</p><p><strong>db</strong> : DataBaseJPA - Utilis&eacute; pour interagir avec la base de donn&eacute;es.</p><p><strong>parameters</strong> : ConcurrentHashMap&lt;String, Object&gt; - Utilis&eacute; pour stocker les param&egrave;tres de requ&ecirc;te pour la base de donn&eacute;es.</p><p><strong>M&eacute;thodes</strong></p><p><strong>MailiNatBankSFDWriter()</strong> : Constructeur par d&eacute;faut qui initialise la description du processus.</p><p><strong>execute()</strong> : Ex&eacute;cute le processus de g&eacute;n&eacute;ration des fichiers binaires, en r&eacute;cup&eacute;rant les donn&eacute;es, formant les transactions, et &eacute;crivant les fichiers.</p><p><strong>prepareCheques(List&lt;Cheques&gt; cheques, String user)</strong> : Pr&eacute;pare les donn&eacute;es et les images des ch&egrave;ques pour l'&eacute;criture dans le fichier binaire.</p><p><strong>prepareEffets(List&lt;Effets&gt; effets, String user)</strong> : Pr&eacute;pare les donn&eacute;es et les images des effets pour l'&eacute;criture dans le fichier binaire.</p><p><strong>updateEtatOperations(String user)</strong> : Met &agrave; jour l'&eacute;tat des op&eacute;rations dans la base de donn&eacute;es apr&egrave;s le traitement.</p><p><strong>returnEtabsUser(BigDecimal etat, BigDecimal etatImage)</strong> : R&eacute;cup&egrave;re la liste des &eacute;tablissements utilisateurs pour un &eacute;tat donn&eacute;.</p><p><strong>Composants Internes</strong></p><p><strong>EnteteRemise, ImageIndex, RIO</strong> : Classes utilis&eacute;es pour repr&eacute;senter les diff&eacute;rentes sections des donn&eacute;es de remise et d'indexation des images.</p><p><strong>Param&egrave;tres Utilis&eacute;s</strong></p><p><strong>CETAOPELOTGEN, CETAIMASTO, CETAIMATRA, CETAIMAENV</strong> : &Eacute;tats des ch&egrave;ques et effets &agrave; traiter.</p><p><strong>VERSION_SICA, DATECOMPENS_NAT, TATOO_PICTURE</strong> : Param&egrave;tres de configuration pour la g&eacute;n&eacute;ration des fichiers.</p><p><strong>Remarques</strong></p><p><strong>Gestion des Erreurs</strong> : Les erreurs lors de la g&eacute;n&eacute;ration des fichiers ou de la r&eacute;cup&eacute;ration des donn&eacute;es sont g&eacute;r&eacute;es par des logs et des messages d'erreur.</p><p><strong>Extensibilit&eacute;</strong> : La classe est con&ccedil;ue pour &ecirc;tre facilement extensible pour inclure d'autres types de transactions ou formats de fichiers.</p><p><strong>Configuration</strong> : La classe utilise des param&egrave;tres configurables pour la g&eacute;n&eacute;ration des fichiers, permettant une adaptation facile aux besoins sp&eacute;cifiques du syst&egrave;me.</p><p><strong>Coordination</strong> : La classe MailiNatBankSFDWriter coordonne la g&eacute;n&eacute;ration des fichiers binaires pour les ch&egrave;ques et effets, assurant une gestion efficace des transferts pour les banques nationales.</p>